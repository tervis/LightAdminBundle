(()=>{function e(){return localStorage.getItem("theme")}function t(){let t=e();return t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}function a(e){"auto"===e?document.documentElement.setAttribute("data-bs-theme",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"):document.documentElement.setAttribute("data-bs-theme",e)}function o(e,t=!1){let a=document.querySelector("#bd-theme");if(!a)return;let r=document.querySelector("#bd-theme-text"),i=document.querySelector(".theme-icon-active use"),s=document.querySelector(`[data-bs-theme-value="${e}"]`);if(!s)return void console.warn(`Theme switch button for value "${e}" not found.`);let c=s.querySelector("svg use")?.getAttribute("href");if(document.querySelectorAll("[data-bs-theme-value]").forEach(e=>{e.classList.remove("active"),e.setAttribute("aria-pressed","false")}),s.classList.add("active"),s.setAttribute("aria-pressed","true"),i&&c&&i.setAttribute("href",c),r){let e=`${r.textContent} (${s.dataset.bsThemeValue})`;a.setAttribute("aria-label",e)}t&&a.focus()}class r{constructor(e){this.field=e,this.field.addEventListener("change",this.#e.bind(this))}#e(){let e=this.field,t=e.dataset.token;fetch(e.dataset.toggleUrl,{method:"POST",mode:"cors",body:JSON.stringify({propertyName:e.dataset.propertyName,_token:t}),headers:{credentials:"same-origin","Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-Token":t}}).then(e=>{}).catch(()=>this.#t())}#t(){this.field.checked=!this.field.checked,this.field.disabled=!0,this.field.closest(".form-switch").classList.add("disabled")}}async function i(e){e.preventDefault();let t=e.currentTarget,a=t.dataset.url,o=t.dataset.csrfToken;if(!a||!o){console.error("Batch Delete: Missing URL or CSRF Token data attributes on the button."),alert("Deletion cannot proceed: Missing configuration data.");return}let r=document.querySelectorAll(".batch-delete-checkbox"),i=[];if(r&&Array.from(r).forEach(e=>{e.checked&&i.push(e.value)}),0===i.length)return void alert("Please select at least one item to delete.");if(confirm("Are you sure you want to delete the selected items?"))try{let e=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-Token":o},body:JSON.stringify({items:i,_token:o})});if(e.ok)console.log("Batch delete successful:",e),window.location.reload();else{let t=await e.json();console.error("Batch delete failed:",t),alert(`Deletion failed: ${t.message||"Unknown error"}`)}}catch(e){console.error("Network or client-side error during batch delete:",e),alert("A network error occurred. Please try again.")}}let s="lightAdminSidebarActive",c=e=>{try{localStorage.setItem(s,e)}catch(e){console.error("Error saving sidebar state to local storage:",e)}},l=()=>{let e=document.getElementById("sidebar"),t=document.querySelector("body");if(e&&t)try{let a=localStorage.getItem(s);null!==a&&("true"===a?(e.classList.add("active"),t.classList.add("active")):(e.classList.remove("active"),t.classList.remove("active")))}catch(e){console.error("Error loading sidebar state from local storage:",e)}};document.addEventListener("DOMContentLoaded",function(){l();let s=document.getElementById("sidebarCollapse"),n=document.getElementById("sidebar"),d=document.querySelector("body"),u=()=>window.innerWidth<768,h=()=>{n&&d&&(u()?(n.classList.add("active"),d.classList.add("active"),c(!0)):(n.classList.remove("active"),d.classList.remove("active"),c(!1)))};h(),window.addEventListener("resize",h),s&&n&&d&&s.addEventListener("click",()=>{n.classList.toggle("active"),d.classList.toggle("active"),c(!n.classList.contains("active"))}),document.querySelectorAll('td.field-boolean .form-switch input[type="checkbox"]').forEach(e=>{try{new r(e)}catch(e){console.error("Error initializing ToggleSwitch:",e)}});let m=document.getElementById("batchDeleteButton");m&&m.addEventListener("click",i);let f=t();a(f),o(f,!1),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{let r=e();"light"!==r&&"dark"!==r&&(a(t()),o(t(),!1))}),document.querySelectorAll("[data-bs-theme-value]").forEach(e=>{e.addEventListener("click",()=>{let t=e.getAttribute("data-bs-theme-value");localStorage.setItem("theme",t),a(t),o(t,!0)})})})})();
//# sourceMappingURL=light-admin.js.map
